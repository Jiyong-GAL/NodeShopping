mongodb 모듈과 mongoose의 차이
mongodb 와 가장 큰 차이점은 데이터를 입출력 할 때 schema를 갖는다는 것이다

스키마(문서)와 모델(컬렉션)을 만드는 것을 통하여 data를
불러온후에 그 데이터를 객체화시키는데 빠르고 데이터를 수정할수 있게 해준다.

명확하게 Object들을 만들고 데이터들을 묶어서 사용하는 ODM(object Data Mapping)의 특성

mongoose의 virtual()함수
실제 테이블에 존재하는 컬럼이 아닌 가상으로 만들어낸 컬럼
단방향 암호화를 진행할때 client에서 들어온 암호를 가상컬럼에 넣은후 가공후에 실제 컬럼명으로 바꾼후에 넣어서 사용
virtual().set().get()

크립토 모듈을 불러와서 createHash 메소드를 사용하면 됩니다. 인자로 사용할 알고리즘을 넣어주는데요. sha256, sha512같은 게 있습니다. 
현재는 sha512를 추천합니다. 더 길지만 그만큼 더 안전합니다. update 메소드에는 암호화할 비밀번호를 넣어주고요. 
digest에는 어떤 인코딩 방식으로 암호화된 문자열을 표시할지를 정해줍니다. base64, hex, latin1 등의 방식이 있는데 base64가 짧아서 더 선호됩니다.

salt를 key와 같이 저장해야 한다는 것을 꼭 기억하세요! randomBytes 메소드는 매번 다른 salt값을 뱉어내기 때문에 암호화 매번 결과가 달라집니다. 
같은 salt값으로 비밀번호를 찾아야 비교가 가능합니다. 또한 반복 횟수, 비밀번호 길이, 해시 알고리즘, 인코딩 방식까지 다 같아야 같은 결과가 나옵니다